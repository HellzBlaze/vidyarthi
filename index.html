<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vidyarthi | Ultimate</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-layout">
    
    <aside class="sidebar">
        <div class="brand">
            <div class="logo-icon"><i class="fa-solid fa-graduation-cap"></i></div>
            <span>Vidyarthi</span>
        </div>
        
        <nav class="nav-links">
            <button onclick="nav('dashboard')" class="nav-btn active" id="desk-dashboard">
                <i class="fa-solid fa-house"></i> Dashboard
            </button>
            <button onclick="nav('agenda')" class="nav-btn" id="desk-agenda">
                <i class="fa-solid fa-layer-group"></i> Agenda
            </button>
            <button onclick="nav('timetable')" class="nav-btn" id="desk-timetable">
                <i class="fa-regular fa-calendar-days"></i> Timetable
            </button>
            <button onclick="nav('subjects')" class="nav-btn" id="desk-subjects">
                <i class="fa-solid fa-book"></i> Subjects
            </button>
            <button onclick="nav('calendar')" class="nav-btn" id="desk-calendar">
                <i class="fa-brands fa-google"></i> Calendar
            </button>
        </nav>

        <div class="sidebar-footer">
            <button onclick="toggleTheme()" class="theme-toggle">
                <i class="fa-solid fa-moon"></i> <span>Dark Mode</span>
            </button>
        </div>
    </aside>

    <main class="content-area">
        
        <header class="mobile-header">
            <h1 id="page-title">Dashboard</h1>
            <div id="date-badge" class="date-badge">Loading...</div>
        </header>

        <section id="dashboard" class="view active">
            <div class="grid-2">
                <div class="card hero-card">
                    <div class="card-label">HAPPENING NOW</div>
                    <h2 id="next-class-title">Free Time</h2>
                    <p id="next-class-time">No classes scheduled right now</p>
                </div>

                <div class="card">
                    <h3>Quick Actions</h3>
                    <div class="action-buttons">
                        <button onclick="openModal('agenda-modal')" class="btn-action">
                            <i class="fa-solid fa-plus"></i> Task
                        </button>
                        <button onclick="openModal('assign-modal')" class="btn-action">
                            <i class="fa-solid fa-calendar-plus"></i> Class
                        </button>
                    </div>
                </div>
            </div>

            <div class="section-title">
                <h3>Agenda Overview</h3>
            </div>
            <div id="dash-agenda-list" class="list-vertical">
                </div>
        </section>

        <section id="agenda" class="view" style="display:none;">
            <div class="header-actions">
                <div class="scroll-chips" id="category-filters">
                    <button class="chip active" onclick="renderAgenda('all')">All</button>
                    </div>
                <button onclick="openModal('category-modal')" class="btn-icon"><i class="fa-solid fa-gear"></i></button>
            </div>
            
            <div id="agenda-list" class="list-vertical">
                </div>
            
            <button class="fab" onclick="openModal('agenda-modal')">
                <i class="fa-solid fa-plus"></i>
            </button>
        </section>

        <section id="timetable" class="view" style="display:none;">
            <div class="header-actions">
                <button onclick="openModal('block-modal')" class="btn-text">Edit Blocks</button>
                <button onclick="openModal('assign-modal')" class="btn-primary">Assign Subject</button>
            </div>

            <div class="day-selector">
                <button class="day-chip active" onclick="loadTimetable('Monday')">M</button>
                <button class="day-chip" onclick="loadTimetable('Tuesday')">T</button>
                <button class="day-chip" onclick="loadTimetable('Wednesday')">W</button>
                <button class="day-chip" onclick="loadTimetable('Thursday')">T</button>
                <button class="day-chip" onclick="loadTimetable('Friday')">F</button>
                <button class="day-chip" onclick="loadTimetable('Saturday')">S</button>
            </div>

            <div id="timetable-list" class="timeline-container">
                </div>
        </section>

        <section id="subjects" class="view" style="display:none;">
            <div class="header-actions" style="justify-content: flex-end;">
                <button onclick="openModal('subject-modal')" class="btn-primary">+ Add Subject</button>
            </div>
            <div id="subjects-list" class="grid-2"></div>
        </section>

         <section id="calendar" class="view" style="display:none;">
            <div class="card-full">
                <iframe src="https://calendar.google.com/calendar/embed?src=en.indian%23holiday%40group.v.calendar.google.com&ctz=Asia%2FKolkata" style="border: 0" width="100%" height="100%" frameborder="0" scrolling="no"></iframe>
            </div>
        </section>

    </main>

    <nav class="bottom-nav">
        <button onclick="nav('dashboard')" id="mob-dashboard" class="active"><i class="fa-solid fa-house"></i></button>
        <button onclick="nav('timetable')" id="mob-timetable"><i class="fa-regular fa-calendar-days"></i></button>
        <button onclick="openModal('agenda-modal')" class="nav-main-action"><i class="fa-solid fa-plus"></i></button>
        <button onclick="nav('agenda')" id="mob-agenda"><i class="fa-solid fa-layer-group"></i></button>
        <button onclick="nav('subjects')" id="mob-subjects"><i class="fa-solid fa-book"></i></button>
    </nav>

</div>

<div id="subject-modal" class="modal-overlay">
    <div class="modal-sheet">
        <div class="modal-header">
            <h3>New Subject</h3>
            <button onclick="closeModal('subject-modal')">Done</button>
        </div>
        <div class="modal-body">
            <input type="text" id="sub-name" placeholder="Subject Name (e.g. Math)">
            <input type="text" id="sub-teacher" placeholder="Teacher Name">
            <label>Color Code</label>
            <div class="color-picker-row">
                <input type="color" id="sub-color" value="#4f46e5">
            </div>
        </div>
    </div>
</div>

<div id="block-modal" class="modal-overlay">
    <div class="modal-sheet">
        <div class="modal-header">
            <h3>Define Time Slot</h3>
            <button onclick="closeModal('block-modal')">Done</button>
        </div>
        <div class="modal-body">
            <p class="hint">Create a slot like "Period 1" or "Lunch". You only do this once.</p>
            <input type="text" id="block-name" placeholder="Name (e.g. 1st Period)">
            <div class="row">
                <input type="time" id="block-start">
                <span style="padding:0 10px">to</span>
                <input type="time" id="block-end">
            </div>
            <button onclick="addBlock()" class="btn-full-primary">Save Block</button>
            <div id="existing-blocks-list" style="margin-top:20px;"></div>
        </div>
    </div>
</div>

<div id="assign-modal" class="modal-overlay">
    <div class="modal-sheet">
        <div class="modal-header">
            <h3>Assign Class</h3>
            <button onclick="closeModal('assign-modal')">Close</button>
        </div>
        <div class="modal-body">
            <select id="assign-day">
                <option value="Monday">Monday</option>
                <option value="Tuesday">Tuesday</option>
                <option value="Wednesday">Wednesday</option>
                <option value="Thursday">Thursday</option>
                <option value="Friday">Friday</option>
                <option value="Saturday">Saturday</option>
            </select>
            <select id="assign-block"></select>
            <select id="assign-subject"></select>
            <button onclick="assignSubject()" class="btn-full-primary">Assign</button>
        </div>
    </div>
</div>

<div id="agenda-modal" class="modal-overlay">
    <div class="modal-sheet">
        <div class="modal-header">
            <h3>New Task</h3>
            <button onclick="closeModal('agenda-modal')">Cancel</button>
        </div>
        <div class="modal-body">
            <input type="text" id="agenda-title" placeholder="What needs to be done?">
            <div class="row">
                <select id="agenda-cat"></select>
                <select id="agenda-sub"></select>
            </div>
            <input type="date" id="agenda-date">
            <button onclick="addAgenda()" class="btn-full-primary">Add Task</button>
        </div>
    </div>
</div>

<div id="category-modal" class="modal-overlay">
    <div class="modal-sheet">
        <div class="modal-header">
            <h3>Categories</h3>
            <button onclick="closeModal('category-modal')">Done</button>
        </div>
        <div class="modal-body">
            <div class="row">
                <input type="text" id="new-cat-name" placeholder="New Category Name">
                <input type="color" id="new-cat-color" value="#ff0000" style="width:50px">
                <button onclick="addCategory()" class="btn-primary">Add</button>
            </div>
            <div id="cat-list-display" class="list-vertical" style="margin-top:15px"></div>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
